<!DOCTYPE html><html lang="th"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>3D Dice Roller</title><style>body,html{margin:0;height:100%;overflow:hidden;background:#111;color:#ccc;font-family:sans-serif}#canvas{width:100%;height:100%;display:block;}#panel{position:absolute;top:20px;left:20px;background:rgba(20,20,20,.85);padding:15px 20px;border-radius:12px;border:1px solid #3ea7ff;box-shadow:0 4px 12px rgba(0,0,0,0.6);backdrop-filter:blur(8px);}#panel h2{margin:0 0 10px;font-size:14px;color:#9cf}#panel button{margin:5px 0;padding:8px 14px;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:background .2s}#rollBtn{background:linear-gradient(180deg,#3ea7ff,#2c79ff);color:#fff}#rollBtn:hover{background:linear-gradient(180deg,#5eb7ff,#3c89ff)}#resetBtn{background:#333;color:#ddd;border:1px solid #3ea7ff}#resetBtn:hover{background:#444}label{font-size:12px;display:block;margin-top:8px;color:#ccc}#tip{margin-top:10px;font-size:11px;color:#aaa;font-style:italic;}#footer{position:absolute;bottom:10px;width:100%;text-align:center;font-size:12px;color:#ffd700;text-shadow:0 0 5px #ff0,0 0 10px #ff0,0 0 20px #ffa500;}</style></head><body><canvas id="canvas"></canvas><div id="panel"><h2>‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°</h2><button id="rollBtn">üé≤ ‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤</button><button id="resetBtn">üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button><label>‡πÅ‡∏£‡∏á‡∏ó‡∏≠‡∏¢ <input id="power" type="range" min="0.5" max="2" step="0.1" value="1"> <span id="powerOut">1.0√ó</span></label><div id="tip">üí° ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡∏•‡∏≤‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏∏‡∏ô‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ</div></div><div id="footer"><a href='#' style="color:#ffd700;text-decoration:none;">Presented by. group dice</a></div><script type="importmap">{"imports":{"three":"https://unpkg.com/three@0.160.0/build/three.module.js","three/examples/jsm/":"https://unpkg.com/three@0.160.0/examples/jsm/"}}</script><script type="module">import * as THREE from 'three';import{OrbitControls}from'three/examples/jsm/controls/OrbitControls.js';import * as CANNON from 'https://cdn.jsdelivr.net/npm/cannon-es@0.20.0/dist/cannon-es.js';const canvas=document.getElementById('canvas');const renderer=new THREE.WebGLRenderer({canvas,antialias:true});renderer.setSize(window.innerWidth,window.innerHeight);renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));renderer.shadowMap.enabled=true;renderer.shadowMap.type=THREE.PCFSoftShadowMap;const scene=new THREE.Scene();scene.background=new THREE.Color(0x111111);const camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,0.1,200);camera.position.set(6,7,6);const controls=new OrbitControls(camera,renderer.domElement);controls.enableDamping=true;controls.target.set(0,0.5,0);// ‡πÑ‡∏ü
const spot=new THREE.SpotLight(0xffffff,0.6,60,Math.PI/6,0.3,1);spot.position.set(8,15,8);spot.castShadow=true;scene.add(spot);scene.add(spot.target);const ambient=new THREE.AmbientLight(0x808080,0.9);scene.add(ambient);const centerSpot=new THREE.SpotLight(0xffd27f,5.0,80,Math.PI/3,0.3,1);centerSpot.position.set(0,25,0);centerSpot.target.position.set(0,0,0);centerSpot.castShadow=true;scene.add(centerSpot);scene.add(centerSpot.target);const sideLightL=new THREE.PointLight(0xfff2cc,1.2,100);sideLightL.position.set(-15,10,0);scene.add(sideLightL);const sideLightR=new THREE.PointLight(0xfff2cc,1.2,100);sideLightR.position.set(15,10,0);scene.add(sideLightR);// world
const world=new CANNON.World({gravity:new CANNON.Vec3(0,-9.82,0)});let rolling=false;function allStopped(){return dice.every(d=>d.body.velocity.length()<0.1&&d.body.angularVelocity.length()<0.1);}const groundBody=new CANNON.Body({mass:0,shape:new CANNON.Plane()});groundBody.quaternion.setFromEuler(-Math.PI/2,0,0);world.addBody(groundBody);// ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏°‡∏≤‡∏Å‡∏£‡∏∏‡∏Å
const size=512,canvasTex=document.createElement('canvas');canvasTex.width=canvasTex.height=size;const ctx=canvasTex.getContext('2d');const sq=size/8;for(let i=0;i<8;i++){for(let j=0;j<8;j++){ctx.fillStyle=(i+j)%2===0?'#fff':'#000';ctx.fillRect(i*sq,j*sq,sq,sq);}}const groundTexture=new THREE.CanvasTexture(canvasTex);groundTexture.wrapS=groundTexture.wrapT=THREE.RepeatWrapping;groundTexture.repeat.set(4,4);const groundMat=new THREE.MeshStandardMaterial({map:groundTexture});const groundMesh=new THREE.Mesh(new THREE.PlaneGeometry(20,20),groundMat);groundMesh.rotation.x=-Math.PI/2;groundMesh.receiveShadow=true;scene.add(groundMesh);// ‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡∏•‡πà‡∏≠‡∏á‡∏´‡∏ô
const wallSize=20,wallHeight=8,thickness=0.5;function addInvisibleWall(x,y,z,sx,sy,sz){const body=new CANNON.Body({mass:0,shape:new CANNON.Box(new CANNON.Vec3(sx/2,sy/2,sz/2))});body.position.set(x,y,z);world.addBody(body);}addInvisibleWall(0,wallHeight/2,-10,wallSize,wallHeight,thickness);addInvisibleWall(0,wallHeight/2,10,wallSize,wallHeight,thickness);addInvisibleWall(-10,wallHeight/2,0,thickness,wallHeight,wallSize);addInvisibleWall(10,wallHeight/2,0,thickness,wallHeight,wallSize);// ‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤‡πÅ‡∏ö‡∏ö BoxGeometry ‡πÅ‡∏ï‡πà‡πÉ‡∏ä‡πâ bevel ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏ô
function makePipsTexture(n){const size=256,canvas=document.createElement('canvas');canvas.width=canvas.height=size;const ctx=canvas.getContext('2d');ctx.fillStyle='#fff';ctx.fillRect(0,0,size,size);ctx.fillStyle='#000';const r=20,grid=[size*.25,size*.5,size*.75];({1:[[1,1]],2:[[0,0],[2,2]],3:[[0,0],[1,1],[2,2]],4:[[0,0],[0,2],[2,0],[2,2]],5:[[0,0],[0,2],[1,1],[2,0],[2,2]],6:[[0,0],[0,1],[0,2],[2,0],[2,1],[2,2]]}[n]).forEach(([i,j])=>{ctx.beginPath();ctx.arc(grid[i],grid[j],r,0,Math.PI*2);ctx.fill()});return new THREE.CanvasTexture(canvas)}const diceTextures=[1,2,3,4,5,6].map(makePipsTexture);function makeDie(){const geo=new THREE.BoxGeometry(1,1,1,20,20,20);const mats=[5,3,4,2,0,1].map(i=>new THREE.MeshStandardMaterial({map:diceTextures[i],roughness:0.4,metalness:0.3}));const mesh=new THREE.Mesh(geo,mats);mesh.castShadow=true;mesh.receiveShadow=true;const body=new CANNON.Body({mass:1,shape:new CANNON.Box(new CANNON.Vec3(.5,.5,.5))});return{mesh,body}}const dice=[makeDie(),makeDie()];dice[0].body.position.set(-1,2,0);dice[1].body.position.set(1,2,0);dice.forEach(d=>{scene.add(d.mesh);world.addBody(d.body)});function rollDice(){if(rolling)return;rolling=true;const p=parseFloat(power.value);dice.forEach(d=>{d.body.velocity.set((Math.random()-.5)*8*p,5*p,(Math.random()-.5)*8*p);d.body.angularVelocity.set(Math.random()*10*p,Math.random()*10*p,Math.random()*10*p)})}function resetDice(){dice[0].body.position.set(-1,2,0);dice[1].body.position.set(1,2,0);dice.forEach(d=>{d.body.velocity.setZero();d.body.angularVelocity.setZero()});rolling=false;}document.getElementById('rollBtn').addEventListener('click',rollDice);document.getElementById('resetBtn').addEventListener('click',resetDice);const power=document.getElementById('power'),powerOut=document.getElementById('powerOut');power.addEventListener('input',()=>powerOut.textContent=power.value+'√ó');function animate(){world.fixedStep();dice.forEach(d=>{d.mesh.position.copy(d.body.position);d.mesh.quaternion.copy(d.body.quaternion)});if(rolling&&allStopped()){rolling=false;}controls.update();renderer.render(scene,camera);requestAnimationFrame(animate)}animate();</script></body></html>